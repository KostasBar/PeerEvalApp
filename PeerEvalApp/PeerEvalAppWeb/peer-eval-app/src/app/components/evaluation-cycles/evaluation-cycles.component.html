<div class="d-flex justify-content-end align-items-center">
    <form [formGroup]="cycleForm" (ngSubmit)="onSubmit()">
        <!-- Cycle Title Field -->
        <div class="mb-3">
          <label for="cycleTitle" class="form-label">Cycle Title</label>
          <input
            type="text"
            id="cycleTitle"
            class="form-control"
            formControlName="cycleTitle"
            placeholder="Enter cycle title"
            required
          />
          <!-- Optional: Display validation error -->
          <div
            *ngIf="cycleForm.get('cycleTitle')?.invalid && cycleForm.get('cycleTitle')?.touched"
            class="text-danger mt-1"
          >
            Cycle Title is required.
          </div>
        </div>
      
        <!-- Duration Dropdown Field -->
        <div class="mb-3">
          <label for="duration" class="form-label">Duration</label>
          <select
            id="duration"
            class="form-select"
            formControlName="duration"
            required
          >
            <option value="" disabled selected>Select duration</option>
            <option [value]="1">1 week</option>
            <option [value]="2">2 weeks</option>
            <option [value]="3">3 weeks</option>
          </select>
          <!-- Optional: Display validation error -->
          <div
            *ngIf="cycleForm.get('duration')?.invalid && cycleForm.get('duration')?.touched"
            class="text-danger mt-1"
          >
            Duration is required.
          </div>
        </div>
      
        <!-- Submit Button -->
        <div class="d-flex justify-content-end align-items-center">
          <button type="submit" class="btn btn-success">Initialize New Cycle</button>
        </div>
      </form>
      
</div>
    @if (!evaluationCycles || evaluationCycles.length === 0) {
        <div class="alert bg-warning d-flex justify-content-center align-items-center">
            <p class="mb-0">No Evaluation Cycles Found</p>
        </div>
        
    }
    @else {
    <table class="table table-bordered table-striped text-wrap">
        <thead>
            <tr class="align-middle" >
                <th>
                     Cycle Id
                </th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>

            @for (row of evaluationCycles; track row){
                <tr class="align-middle" >
                    <td>{{row.cycleId}}</td>
                    <td>{{row.cycleStartDate}}</td>
                    <td>{{row.cycleEndDate}}</td>
                    @if(row.status === 0){
                        <td>open</td>
                        <td>
                            <select 
                                class="form-select" 
                                aria-label="Postpone cycle" 
                                (change)="onPostponeChange($event, row.cycleId)"
                                defaultValue=""
                            >
                                <option value="" disabled selected>Select postpone duration</option>
                                <option value="1">1 week</option>
                                <option value="2">2 weeks</option>
                            </select>
                        </td>
                        <td role="button">Close</td>
                    }@else if(row.status === 1){
                        <td>closed</td>
                        <td> - </td>
                        <td> - </td>
                    }
                </tr>
            }
        </tbody>
    
    </table>
}
